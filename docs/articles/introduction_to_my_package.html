<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Introduction to atctools Package • atctools</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Introduction to atctools Package">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">atctools</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/introduction_to_my_package.html">Introduction to atctools Package</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/vljlangen/atctools/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Introduction to atctools Package</h1>
                        <h4 data-toc-skip class="author">Ville
Langén</h4>
            
            <h4 data-toc-skip class="date">March 24, 2025</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/vljlangen/atctools/blob/HEAD/vignettes/introduction_to_my_package.Rmd" class="external-link"><code>vignettes/introduction_to_my_package.Rmd</code></a></small>
      <div class="d-none name"><code>introduction_to_my_package.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/vljlangen/atctools" class="external-link">atctools</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://dplyr.tidyverse.org" class="external-link">dplyr</a></span><span class="op">)</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; Attaching package: 'dplyr'</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:stats':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     filter, lag</span></span>
<span><span class="co">#&gt; The following objects are masked from 'package:base':</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt;     intersect, setdiff, setequal, union</span></span></code></pre></div>
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>Welcome to the <code>atctools</code> package vignette! This vignette
provides an overview of the package functionality, demonstrates the
usage of key functions, and explains the example datasets included.</p>
<div class="section level3">
<h3 id="overview">Overview<a class="anchor" aria-label="anchor" href="#overview"></a>
</h3>
<p>The <code>atctools</code> package provides tools for ATC (Anatomical
Therapeutic Chemical) code matching and data integrity checks for drug
names. It includes functions for matching drug names to ATC codes with
and without stripping trailing characters, as well as validating ATC
codes.</p>
<p>The <code>atctools</code> package comprises:</p>
<ul>
<li>
<strong>Five main functions</strong> for drug name matching, ATC
code assignment, and validation:
<ul>
<li>
<strong><code>drug_match</code></strong>: Matches drug names to ATC
codes without stripping trailing characters.</li>
<li>
<strong><code>drug_match_strip</code></strong>: Matches drug names
to ATC codes, stripping trailing characters such as “mg”, “g”, etc.</li>
<li>
<strong><code>atc2drug</code></strong>: Matches ATC codes to drug
names.</li>
<li>
<strong><code>validate_atc</code></strong>: Validates whether the
ATC codes follow the correct format (length and structure).</li>
<li>
<strong><code>validate_atc_by_reference</code></strong>: Validates
ATC codes by checking them against a reference list of known codes.</li>
</ul>
</li>
<li>
<strong>Five example datasets</strong> to illustrate package usage:
<ul>
<li>
<strong><code>example_drug_data</code></strong>: Drug names without
milligrams.</li>
<li>
<strong><code>example_drug_data_with_mg</code></strong>: Drug names
including milligrams.</li>
<li>
<strong><code>example_reference_data</code></strong>: Reference data
with ATC codes and corresponding drug names.</li>
<li>
<strong><code>example_atc_data</code></strong>: ATC codes for
testing the <code>atc2drug</code> function, including valid, non-valid,
and NA values.</li>
<li>
<strong><code>example_atc_data_for_validation</code></strong>: ATC
codes with a mix of valid, invalid, and unknown codes for testing
validation functions.</li>
</ul>
</li>
</ul>
</div>
<div class="section level3">
<h3 id="example-datasets">Example Datasets<a class="anchor" aria-label="anchor" href="#example-datasets"></a>
</h3>
<div class="section level4">
<h4 id="atctoolsexample_drug_data">atctools::example_drug_data<a class="anchor" aria-label="anchor" href="#atctoolsexample_drug_data"></a>
</h4>
<p>This dataset contains example drug names without milligrams.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_drug_data</span></span>
<span><span class="co">#&gt;       drug_name</span></span>
<span><span class="co">#&gt; 1       Aspirin</span></span>
<span><span class="co">#&gt; 2   Paracetamol</span></span>
<span><span class="co">#&gt; 3     Ibuprofen</span></span>
<span><span class="co">#&gt; 4    Cetirizine</span></span>
<span><span class="co">#&gt; 5    Lisinopril</span></span>
<span><span class="co">#&gt; 6     Metformin</span></span>
<span><span class="co">#&gt; 7  Atorvastatin</span></span>
<span><span class="co">#&gt; 8    Omeprazole</span></span>
<span><span class="co">#&gt; 9    Salbutamol</span></span>
<span><span class="co">#&gt; 10  Amoxicillin</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="atctoolsexample_drug_data_with_mg">atctools::example_drug_data_with_mg<a class="anchor" aria-label="anchor" href="#atctoolsexample_drug_data_with_mg"></a>
</h4>
<p>This dataset contains example drug names including milligrams.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_drug_data_with_mg</span></span>
<span><span class="co">#&gt;            drug_name</span></span>
<span><span class="co">#&gt; 1      Aspirin 100mg</span></span>
<span><span class="co">#&gt; 2  Paracetamol 500mg</span></span>
<span><span class="co">#&gt; 3    Ibuprofen 200mg</span></span>
<span><span class="co">#&gt; 4    Cetirizine 10mg</span></span>
<span><span class="co">#&gt; 5    Lisinopril 20mg</span></span>
<span><span class="co">#&gt; 6   Metformin 1000mg</span></span>
<span><span class="co">#&gt; 7  Atorvastatin 40mg</span></span>
<span><span class="co">#&gt; 8    Omeprazole 20mg</span></span>
<span><span class="co">#&gt; 9     Salbutamol 2mg</span></span>
<span><span class="co">#&gt; 10 Amoxicillin 500mg</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="atctoolsexample_reference_data">atctools::example_reference_data<a class="anchor" aria-label="anchor" href="#atctoolsexample_reference_data"></a>
</h4>
<p>This dataset is a reference dataset containing example drug names and
corresponding ATC codes for drug matching. Please ensure that:</p>
<ul>
<li>The first column (in this example: <code>drug_name</code>) contains
drug names.</li>
<li>The second column (in this example: <code>ATC_code</code>) contains
ATC codes.</li>
</ul>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_reference_data</span></span>
<span><span class="co">#&gt;       drug_name ATC_code</span></span>
<span><span class="co">#&gt; 1       aspirin  B01AC06</span></span>
<span><span class="co">#&gt; 2   paracetamol  N02BE01</span></span>
<span><span class="co">#&gt; 3     ibuprofen  M01AE01</span></span>
<span><span class="co">#&gt; 4    cetirizine  R06AE07</span></span>
<span><span class="co">#&gt; 5    lisinopril  C09AA03</span></span>
<span><span class="co">#&gt; 6     metformin  A10BA02</span></span>
<span><span class="co">#&gt; 7  atorvastatin  C10AA05</span></span>
<span><span class="co">#&gt; 8    omeprazole  A02BC01</span></span>
<span><span class="co">#&gt; 9    salbutamol  R03AC02</span></span>
<span><span class="co">#&gt; 10  amoxicillin  J01CA04</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="atctoolsexample_atc_data">atctools::example_atc_data<a class="anchor" aria-label="anchor" href="#atctoolsexample_atc_data"></a>
</h4>
<p>This dataset provides example ATC codes for testing the
<code>atc2drug</code> function. It includes valid ATC codes, non-valid
codes, and <code>NA</code> values to demonstrate how the function
handles different types of input.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_atc_data</span></span>
<span><span class="co">#&gt;     ATC_code</span></span>
<span><span class="co">#&gt; 1    B01AC06</span></span>
<span><span class="co">#&gt; 2    N02BE01</span></span>
<span><span class="co">#&gt; 3       &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4    M01AE01</span></span>
<span><span class="co">#&gt; 5    R06AE07</span></span>
<span><span class="co">#&gt; 6 ABCDE12345</span></span>
<span><span class="co">#&gt; 7 abcde12345</span></span>
<span><span class="co">#&gt; 8       &lt;NA&gt;</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="atctoolsexample_atc_data_for_validation">atctools::example_atc_data_for_validation<a class="anchor" aria-label="anchor" href="#atctoolsexample_atc_data_for_validation"></a>
</h4>
<p>This dataset contains a mix of valid, invalid, and unknown ATC codes
across two columns (<code>atc_1</code>, <code>atc_2</code>) for testing
the validation functions.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">example_atc_data_for_validation</span></span>
<span><span class="co">#&gt;   ID   atc_1   atc_2</span></span>
<span><span class="co">#&gt; 1  1 B01AC06 C10AA05</span></span>
<span><span class="co">#&gt; 2  2 N02BE01 M01AE01</span></span>
<span><span class="co">#&gt; 3  3  FAKETC NOPE123</span></span>
<span><span class="co">#&gt; 4  4 WRONG01 XXXXX01</span></span>
<span><span class="co">#&gt; 5  5 Z99ZZ99 J01CA04</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="functions">Functions<a class="anchor" aria-label="anchor" href="#functions"></a>
</h3>
<div class="section level4">
<h4 id="atctoolsvalidate_atc">atctools::validate_atc()<a class="anchor" aria-label="anchor" href="#atctoolsvalidate_atc"></a>
</h4>
<p>The <code><a href="../reference/validate_atc.html">validate_atc()</a></code> function checks whether each ATC code
in a specified column is format-valid based on the official ATC code
structure. It adds a new column (e.g., <code>atc_1_invalid</code>) next
to the specified column indicating whether the code is invalid
(<code>1</code>) or valid (<code>0</code>).</p>
<p>ATC codes must be either 5 or 7 characters long and follow the
expected letter-number-letter-letter-number-number structure (for
7-character codes).</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Validate ATC codes by format</span></span>
<span><span class="va">validate_output</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_atc.html">validate_atc</a></span><span class="op">(</span><span class="va">example_atc_data_for_validation</span>, <span class="st">"atc_1"</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View result</span></span>
<span><span class="va">validate_output</span></span>
<span><span class="co">#&gt;   ID   atc_1 atc_1_invalid   atc_2</span></span>
<span><span class="co">#&gt; 1  1 B01AC06             0 C10AA05</span></span>
<span><span class="co">#&gt; 2  2 N02BE01             0 M01AE01</span></span>
<span><span class="co">#&gt; 3  3  FAKETC             1 NOPE123</span></span>
<span><span class="co">#&gt; 4  4 WRONG01             1 XXXXX01</span></span>
<span><span class="co">#&gt; 5  5 Z99ZZ99             0 J01CA04</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="atctoolsvalidate_atc_with_reference">atctools::validate_atc_with_reference()<a class="anchor" aria-label="anchor" href="#atctoolsvalidate_atc_with_reference"></a>
</h4>
<p>The <code><a href="../reference/validate_atc_with_reference.html">validate_atc_with_reference()</a></code> function checks if
each ATC code in a specified column exists in a reference list of valid
codes (e.g., from <code>example_reference_data</code>). This is useful
for ensuring codes are not just structurally valid but also known and
accepted.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Validate ATC codes against a reference list</span></span>
<span><span class="va">valid_codes</span> <span class="op">&lt;-</span> <span class="va">example_reference_data</span><span class="op">$</span><span class="va">ATC_code</span></span>
<span><span class="va">validate_by_ref_output</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/validate_atc_with_reference.html">validate_atc_with_reference</a></span><span class="op">(</span><span class="va">example_atc_data_for_validation</span>, <span class="st">"atc_2"</span>, <span class="va">valid_codes</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># View result</span></span>
<span><span class="va">validate_by_ref_output</span></span>
<span><span class="co">#&gt;   ID   atc_1   atc_2 atc_2_invalid</span></span>
<span><span class="co">#&gt; 1  1 B01AC06 C10AA05             0</span></span>
<span><span class="co">#&gt; 2  2 N02BE01 M01AE01             0</span></span>
<span><span class="co">#&gt; 3  3  FAKETC NOPE123             1</span></span>
<span><span class="co">#&gt; 4  4 WRONG01 XXXXX01             1</span></span>
<span><span class="co">#&gt; 5  5 Z99ZZ99 J01CA04             0</span></span></code></pre></div>
<div class="section level5">
<h5 id="example-of-combined-output">Example of Combined Output<a class="anchor" aria-label="anchor" href="#example-of-combined-output"></a>
</h5>
<p>Here’s how you might run both validation functions in sequence and
examine the combined results:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">valid_codes</span> <span class="op">&lt;-</span> <span class="va">example_reference_data</span><span class="op">$</span><span class="va">ATC_code</span></span>
<span><span class="va">output_combined</span> <span class="op">&lt;-</span> <span class="va">example_atc_data_for_validation</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/validate_atc.html">validate_atc</a></span><span class="op">(</span><span class="st">"atc_1"</span><span class="op">)</span> <span class="op"><a href="https://magrittr.tidyverse.org/reference/pipe.html" class="external-link">%&gt;%</a></span></span>
<span>  <span class="fu"><a href="../reference/validate_atc_with_reference.html">validate_atc_with_reference</a></span><span class="op">(</span><span class="st">"atc_2"</span>, <span class="va">valid_codes</span><span class="op">)</span></span>
<span></span>
<span><span class="va">output_combined</span></span>
<span><span class="co">#&gt;   ID   atc_1 atc_1_invalid   atc_2 atc_2_invalid</span></span>
<span><span class="co">#&gt; 1  1 B01AC06             0 C10AA05             0</span></span>
<span><span class="co">#&gt; 2  2 N02BE01             0 M01AE01             0</span></span>
<span><span class="co">#&gt; 3  3  FAKETC             1 NOPE123             1</span></span>
<span><span class="co">#&gt; 4  4 WRONG01             1 XXXXX01             1</span></span>
<span><span class="co">#&gt; 5  5 Z99ZZ99             0 J01CA04             0</span></span></code></pre></div>
<p>The flags:</p>
<ul>
<li>
<code>atc_1_invalid</code>: Format-based invalidity</li>
<li>
<code>atc_2_invalid</code>: Not found in reference list</li>
</ul>
</div>
</div>
<div class="section level4">
<h4 id="atctoolsdrug_match">atctools::drug_match()<a class="anchor" aria-label="anchor" href="#atctoolsdrug_match"></a>
</h4>
<p>The <code>drug_match</code> function matches drug names in a dataset
to corresponding ATC codes using a reference dataset. It does not strip
trailing characters from drug names.</p>
<p>Usage:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/vljlangen/atctools" class="external-link">atctools</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Perform drug matching</span></span>
<span><span class="va">output_data1</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/drug_match.html">drug_match</a></span><span class="op">(</span><span class="va">example_drug_data</span>, <span class="st">"drug_name"</span>, <span class="va">example_reference_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display output data</span></span>
<span><span class="va">output_data1</span></span>
<span><span class="co">#&gt;       drug_name drug_name_original drug_name_matched drug_name_flag</span></span>
<span><span class="co">#&gt; 1       Aspirin            aspirin           aspirin              0</span></span>
<span><span class="co">#&gt; 2   Paracetamol        paracetamol       paracetamol              0</span></span>
<span><span class="co">#&gt; 3     Ibuprofen          ibuprofen         ibuprofen              0</span></span>
<span><span class="co">#&gt; 4    Cetirizine         cetirizine        cetirizine              0</span></span>
<span><span class="co">#&gt; 5    Lisinopril         lisinopril        lisinopril              0</span></span>
<span><span class="co">#&gt; 6     Metformin          metformin         metformin              0</span></span>
<span><span class="co">#&gt; 7  Atorvastatin       atorvastatin      atorvastatin              0</span></span>
<span><span class="co">#&gt; 8    Omeprazole         omeprazole        omeprazole              0</span></span>
<span><span class="co">#&gt; 9    Salbutamol         salbutamol        salbutamol              0</span></span>
<span><span class="co">#&gt; 10  Amoxicillin        amoxicillin       amoxicillin              0</span></span>
<span><span class="co">#&gt;    drug_name_ATC</span></span>
<span><span class="co">#&gt; 1        B01AC06</span></span>
<span><span class="co">#&gt; 2        N02BE01</span></span>
<span><span class="co">#&gt; 3        M01AE01</span></span>
<span><span class="co">#&gt; 4        R06AE07</span></span>
<span><span class="co">#&gt; 5        C09AA03</span></span>
<span><span class="co">#&gt; 6        A10BA02</span></span>
<span><span class="co">#&gt; 7        C10AA05</span></span>
<span><span class="co">#&gt; 8        A02BC01</span></span>
<span><span class="co">#&gt; 9        R03AC02</span></span>
<span><span class="co">#&gt; 10       J01CA04</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="atctoolsdrug_match_strip">atctools::drug_match_strip()<a class="anchor" aria-label="anchor" href="#atctoolsdrug_match_strip"></a>
</h4>
<p>The <code>drug_match_strip</code> function matches drug names in a
dataset to corresponding ATC codes, stripping trailing characters (e.g.,
“mg”, “g”) from drug names before matching.</p>
<p>Usage:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Perform drug matching with trailing characters stripped</span></span>
<span><span class="va">output_data2</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/drug_match_strip.html">drug_match_strip</a></span><span class="op">(</span><span class="va">example_drug_data_with_mg</span>, <span class="st">"drug_name"</span>, <span class="va">example_reference_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display output data</span></span>
<span><span class="va">output_data2</span></span>
<span><span class="co">#&gt;            drug_name drug_name_stripped drug_name_matched drug_name_flag</span></span>
<span><span class="co">#&gt; 1      Aspirin 100mg            aspirin           aspirin              0</span></span>
<span><span class="co">#&gt; 2  Paracetamol 500mg        paracetamol       paracetamol              0</span></span>
<span><span class="co">#&gt; 3    Ibuprofen 200mg          ibuprofen         ibuprofen              0</span></span>
<span><span class="co">#&gt; 4    Cetirizine 10mg         cetirizine        cetirizine              0</span></span>
<span><span class="co">#&gt; 5    Lisinopril 20mg         lisinopril        lisinopril              0</span></span>
<span><span class="co">#&gt; 6   Metformin 1000mg          metformin         metformin              0</span></span>
<span><span class="co">#&gt; 7  Atorvastatin 40mg       atorvastatin      atorvastatin              0</span></span>
<span><span class="co">#&gt; 8    Omeprazole 20mg         omeprazole        omeprazole              0</span></span>
<span><span class="co">#&gt; 9     Salbutamol 2mg         salbutamol        salbutamol              0</span></span>
<span><span class="co">#&gt; 10 Amoxicillin 500mg        amoxicillin       amoxicillin              0</span></span>
<span><span class="co">#&gt;    drug_name_ATC</span></span>
<span><span class="co">#&gt; 1        B01AC06</span></span>
<span><span class="co">#&gt; 2        N02BE01</span></span>
<span><span class="co">#&gt; 3        M01AE01</span></span>
<span><span class="co">#&gt; 4        R06AE07</span></span>
<span><span class="co">#&gt; 5        C09AA03</span></span>
<span><span class="co">#&gt; 6        A10BA02</span></span>
<span><span class="co">#&gt; 7        C10AA05</span></span>
<span><span class="co">#&gt; 8        A02BC01</span></span>
<span><span class="co">#&gt; 9        R03AC02</span></span>
<span><span class="co">#&gt; 10       J01CA04</span></span></code></pre></div>
</div>
<div class="section level4">
<h4 id="atctoolsatc2drug">atctools::atc2drug()<a class="anchor" aria-label="anchor" href="#atctoolsatc2drug"></a>
</h4>
<p>The <code>atc2drug</code> function matches ATC codes to drug names
based on a reference dataset. It handles valid ATC codes, ignores
invalid ATC codes, and returns <code>NA</code> for non-matching
codes.</p>
<p>Usage:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># Perform ATC code to drug name matching</span></span>
<span><span class="va">output_data3</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/atc2drug.html">atc2drug</a></span><span class="op">(</span><span class="va">example_atc_data</span>, <span class="st">"ATC_code"</span>, <span class="va">example_reference_data</span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Display output data</span></span>
<span><span class="va">output_data3</span></span>
<span><span class="co">#&gt;     ATC_code ATC_code_drug</span></span>
<span><span class="co">#&gt; 1    B01AC06       aspirin</span></span>
<span><span class="co">#&gt; 2    N02BE01   paracetamol</span></span>
<span><span class="co">#&gt; 3       &lt;NA&gt;          &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 4    M01AE01     ibuprofen</span></span>
<span><span class="co">#&gt; 5    R06AE07    cetirizine</span></span>
<span><span class="co">#&gt; 6 ABCDE12345          &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 7 abcde12345          &lt;NA&gt;</span></span>
<span><span class="co">#&gt; 8       &lt;NA&gt;          &lt;NA&gt;</span></span></code></pre></div>
</div>
</div>
<div class="section level3">
<h3 id="flag-meaning-in-the-output-data-of-example_drug_data-and-example_drug_data_with_mg">Flag Meaning in the Output Data of <code>example_drug_data</code>
and <code>example_drug_data_with_mg</code><a class="anchor" aria-label="anchor" href="#flag-meaning-in-the-output-data-of-example_drug_data-and-example_drug_data_with_mg"></a>
</h3>
<p>The <code>drug_name_flag</code> column in the output dataset
indicates whether there is a prefix mismatch between the drug name and
its matched ATC code.</p>
<ul>
<li>1: Indicates a mismatch where the first three characters of the drug
name do not match the first three characters of the ATC code.</li>
<li>0: Indicates a match where the first three characters of the drug
name match the first three characters of the ATC code.</li>
</ul>
</div>
<div class="section level3">
<h3 id="conclusion">Conclusion<a class="anchor" aria-label="anchor" href="#conclusion"></a>
</h3>
<p>This vignette provides an overview of how to use the atctools package
for drug name matching and understanding the flag column in the output.
For more details on each function and additional functionality, refer to
the package documentation and examples.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Ville Langén.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
